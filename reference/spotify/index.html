
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../collection/">
      
      
        <link rel="next" href="../sync/">
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.16">
    
    
      
        <title>Spotify - DJ Tools</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.7e37652d.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../assets/_mkdocstrings.css">
    
      <link rel="stylesheet" href="../../css/mkdocstrings.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#spotify" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="DJ Tools" class="md-header__button md-logo" aria-label="DJ Tools" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            DJ Tools
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Spotify
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
      <div class="md-header__source">
        <a href="https://github.com/a-rich/DJ-Tools/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="DJ Tools" class="md-nav__button md-logo" aria-label="DJ Tools" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    DJ Tools
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/a-rich/DJ-Tools/" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 7.0.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2025 Fonticons, Inc.--><path fill="currentColor" d="M439.6 236.1 244 40.5c-5.4-5.5-12.8-8.5-20.4-8.5s-15 3-20.4 8.4L162.5 81l51.5 51.5c27.1-9.1 52.7 16.8 43.4 43.7l49.7 49.7c34.2-11.8 61.2 31 35.5 56.7-26.5 26.5-70.2-2.9-56-37.3L240.3 199v121.9c25.3 12.5 22.3 41.8 9.1 55-6.4 6.4-15.2 10.1-24.3 10.1s-17.8-3.6-24.3-10.1c-17.6-17.6-11.1-46.9 11.2-56v-123c-20.8-8.5-24.6-30.7-18.6-45L142.6 101 8.5 235.1C3 240.6 0 247.9 0 255.5s3 15 8.5 20.4l195.6 195.7c5.4 5.4 12.7 8.4 20.4 8.4s15-3 20.4-8.4l194.7-194.7c5.4-5.4 8.4-12.8 8.4-20.4s-3-15-8.4-20.4"/></svg>
  </div>
  <div class="md-source__repository">
    GitHub
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Tutorials
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Tutorials
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2_1" >
        
          
          <label class="md-nav__link" for="__nav_2_1" id="__nav_2_1_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Getting Started
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_2_1_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2_1">
            <span class="md-nav__icon md-icon"></span>
            Getting Started
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/getting_started/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/getting_started/overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/getting_started/setup/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/getting_started/usage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Usage
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../tutorials/getting_started/configuration/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Configuration
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    How-to Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            How-to Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_2" >
        
          
          <label class="md-nav__link" for="__nav_3_2" id="__nav_3_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Collection
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_2">
            <span class="md-nav__icon md-icon"></span>
            Collection
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/collection_playlists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Build Playlists From Tags
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/combiner_playlists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Combine Playlists With Boolean Algebra
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/copy_playlists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Copy Tracks From Playlists
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/shuffle_playlists/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Shuffle Tracks in Playlists
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_3" >
        
          
          <label class="md-nav__link" for="__nav_3_3" id="__nav_3_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Spotify
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_3">
            <span class="md-nav__icon md-icon"></span>
            Spotify
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/reddit_spotify_api_access/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup Reddit & Spotify API Access
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/spotify_playlist_from_upload/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create Spotify Playlists From Other Users' Uploads
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/spotify_playlist_from_reddit/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Create Spotify Playlists From Reddit Posts
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sync
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Sync
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/setup_object_storage/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Setup Object Storage For Syncing Files
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/sync_beatcloud/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sync Files with the Beatcloud
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/sync_spotify/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sync Tracks From Spotify Playlists
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_5" >
        
          
          <label class="md-nav__link" for="__nav_3_5" id="__nav_3_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_5">
            <span class="md-nav__icon md-icon"></span>
            Utils
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/check_beatcloud/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Check the Beatcloud for Tracks in Spotify Playlists or Local Directories
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/extract_from_url/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Extract Audio Files From URLs
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/process_recordings/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Process Recorded Files Using Spotify Playlists
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../how_to_guides/standardize_audio/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Standardize Audio Files
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Conceptual Guides
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Conceptual Guides
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../conceptual_guides/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../conceptual_guides/rekordbox_collection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Get to Know Your Rekordbox Collection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../conceptual_guides/tagging_guide/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Tagging Guide
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../conceptual_guides/file_standardization/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    The Importance of Standardization and Quality Control
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Reference
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Reference
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../configs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Config
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../collection/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Collection
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Spotify
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Spotify
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.config" class="md-nav__link">
    <span class="md-ellipsis">
      config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.config.SpotifyConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SpotifyConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SpotifyConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#djtools.spotify.config.SpotifyConfig.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.config.SubredditConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SubredditConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.playlist_builder" class="md-nav__link">
    <span class="md-ellipsis">
      playlist_builder
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.playlist_builder.async_spotify_playlists" class="md-nav__link">
    <span class="md-ellipsis">
      async_spotify_playlists
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.playlist_builder.spotify_playlist_from_upload" class="md-nav__link">
    <span class="md-ellipsis">
      spotify_playlist_from_upload
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.playlist_builder.spotify_playlists" class="md-nav__link">
    <span class="md-ellipsis">
      spotify_playlists
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers" class="md-nav__link">
    <span class="md-ellipsis">
      helpers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.filter_results" class="md-nav__link">
    <span class="md-ellipsis">
      filter_results
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.get_playlist_ids" class="md-nav__link">
    <span class="md-ellipsis">
      get_playlist_ids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.get_reddit_client" class="md-nav__link">
    <span class="md-ellipsis">
      get_reddit_client
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.get_spotify_client" class="md-nav__link">
    <span class="md-ellipsis">
      get_spotify_client
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.get_subreddit_posts" class="md-nav__link">
    <span class="md-ellipsis">
      get_subreddit_posts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.populate_playlist" class="md-nav__link">
    <span class="md-ellipsis">
      populate_playlist
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.write_playlist_ids" class="md-nav__link">
    <span class="md-ellipsis">
      write_playlist_ids
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sync/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sync
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../utils/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Utils
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Developer Docs
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Developer Docs
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_docs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Home
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_docs/system_overview/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    System Overview
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_docs/new_collections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adding DJ Software Support to the Collections Package
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_docs/collections_api/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Using the Collections API
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../developer_docs/playlist_filters/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Adding Custom PlaylistFilters
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.config" class="md-nav__link">
    <span class="md-ellipsis">
      config
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.config.SpotifyConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SpotifyConfig
    </span>
  </a>
  
    <nav class="md-nav" aria-label="SpotifyConfig">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#djtools.spotify.config.SpotifyConfig.__init__" class="md-nav__link">
    <span class="md-ellipsis">
      __init__
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.config.SubredditConfig" class="md-nav__link">
    <span class="md-ellipsis">
      SubredditConfig
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.playlist_builder" class="md-nav__link">
    <span class="md-ellipsis">
      playlist_builder
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.playlist_builder.async_spotify_playlists" class="md-nav__link">
    <span class="md-ellipsis">
      async_spotify_playlists
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.playlist_builder.spotify_playlist_from_upload" class="md-nav__link">
    <span class="md-ellipsis">
      spotify_playlist_from_upload
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.playlist_builder.spotify_playlists" class="md-nav__link">
    <span class="md-ellipsis">
      spotify_playlists
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers" class="md-nav__link">
    <span class="md-ellipsis">
      helpers
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.filter_results" class="md-nav__link">
    <span class="md-ellipsis">
      filter_results
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.get_playlist_ids" class="md-nav__link">
    <span class="md-ellipsis">
      get_playlist_ids
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.get_reddit_client" class="md-nav__link">
    <span class="md-ellipsis">
      get_reddit_client
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.get_spotify_client" class="md-nav__link">
    <span class="md-ellipsis">
      get_spotify_client
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.get_subreddit_posts" class="md-nav__link">
    <span class="md-ellipsis">
      get_subreddit_posts
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.populate_playlist" class="md-nav__link">
    <span class="md-ellipsis">
      populate_playlist
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#djtools.spotify.helpers.write_playlist_ids" class="md-nav__link">
    <span class="md-ellipsis">
      write_playlist_ids
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


  
  


<h1 id="spotify">Spotify</h1>


<div class="doc doc-object doc-module">



<a id="djtools.spotify.config"></a>
    <div class="doc doc-contents first">

        <p>This module contains the configuration object for the spotify package.
The attributes of this configuration object correspond with the "spotify" key
of config.yaml</p>









  <div class="doc doc-children">








<div class="doc doc-object doc-class">



<h2 id="djtools.spotify.config.SpotifyConfig" class="doc doc-heading">
            <code>SpotifyConfig</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="djtools.configs.config_formatter.BaseConfigFormatter">BaseConfigFormatter</span></code></p>


        <p>Configuration object for the spotify package.</p>







              <details class="quote">
                <summary>Source code in <code>src/djtools/spotify/config.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 75</span>
<span class="normal"> 76</span>
<span class="normal"> 77</span>
<span class="normal"> 78</span>
<span class="normal"> 79</span>
<span class="normal"> 80</span>
<span class="normal"> 81</span>
<span class="normal"> 82</span>
<span class="normal"> 83</span>
<span class="normal"> 84</span>
<span class="normal"> 85</span>
<span class="normal"> 86</span>
<span class="normal"> 87</span>
<span class="normal"> 88</span>
<span class="normal"> 89</span>
<span class="normal"> 90</span>
<span class="normal"> 91</span>
<span class="normal"> 92</span>
<span class="normal"> 93</span>
<span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SpotifyConfig</span><span class="p">(</span><span class="n">BaseConfigFormatter</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration object for the spotify package.&quot;&quot;&quot;</span>

    <span class="n">spotify_playlist_default_limit</span><span class="p">:</span> <span class="n">NonNegativeInt</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="n">spotify_playlist_default_period</span><span class="p">:</span> <span class="n">SubredditPeriod</span> <span class="o">=</span> <span class="n">SubredditPeriod</span><span class="o">.</span><span class="n">WEEK</span>
    <span class="n">spotify_playlist_default_type</span><span class="p">:</span> <span class="n">SubredditType</span> <span class="o">=</span> <span class="n">SubredditType</span><span class="o">.</span><span class="n">HOT</span>
    <span class="n">spotify_playlist_from_upload</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">spotify_playlist_fuzz_ratio</span><span class="p">:</span> <span class="n">NonNegativeInt</span> <span class="o">=</span> <span class="mi">70</span>
    <span class="n">spotify_playlist_post_limit</span><span class="p">:</span> <span class="n">NonNegativeInt</span> <span class="o">=</span> <span class="mi">100</span>
    <span class="n">spotify_playlist_subreddits</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">SubredditConfig</span><span class="p">]</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="n">spotify_playlists</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">False</span>
    <span class="n">reddit_client_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">reddit_client_secret</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">reddit_user_agent</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">spotify_client_id</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">spotify_client_secret</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">spotify_redirect_uri</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">spotify_username</span><span class="p">:</span> <span class="nb">str</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>

    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">        Raises:</span>
<span class="sd">            RuntimeError: Spotify API credentials must exit.</span>
<span class="sd">            RuntimeError: Spotify API credentials must be valid.</span>
<span class="sd">            RuntimeError: Reddit API credentials must exist.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spotify_playlists</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">spotify_playlist_from_upload</span>
        <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spotify_client_id</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spotify_client_secret</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spotify_redirect_uri</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">spotify_username</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;Without all the configuration options spotify_client_id, &quot;</span>
                <span class="s2">&quot;spotify_client_secret, spotify_redirect_uri, and &quot;</span>
                <span class="s2">&quot;spotify_username set to valid values, you cannot use &quot;</span>
                <span class="s2">&quot;spotify_playlists or spotify_playlist_from_upload&quot;</span>
            <span class="p">)</span>
        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spotify_playlists</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">spotify_playlist_from_upload</span><span class="p">:</span>
            <span class="c1"># pylint: disable=cyclic-import</span>
            <span class="kn">from</span><span class="w"> </span><span class="nn">djtools.spotify.helpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_spotify_client</span>

            <span class="n">spotify</span> <span class="o">=</span> <span class="n">get_spotify_client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
            <span class="k">try</span><span class="p">:</span>
                <span class="n">spotify</span><span class="o">.</span><span class="n">current_user</span><span class="p">()</span>
            <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
                <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Spotify credentials are invalid!&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>

        <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spotify_playlists</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span>
            <span class="p">[</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">reddit_client_id</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">reddit_client_secret</span><span class="p">,</span>
                <span class="bp">self</span><span class="o">.</span><span class="n">reddit_user_agent</span><span class="p">,</span>
            <span class="p">]</span>
        <span class="p">):</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
                <span class="s2">&quot;Without all the configuration options reddit_client_id, &quot;</span>
                <span class="s2">&quot;reddit_client_secret, and reddit_user_agent, set to valid &quot;</span>
                <span class="s2">&quot;values, you cannot use spotify_playlists&quot;</span>
            <span class="p">)</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h3 id="djtools.spotify.config.SpotifyConfig.__init__" class="doc doc-heading">
            <code class="highlight language-python"><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span></code>

</h3>


    <div class="doc doc-contents ">

        <p>Constructor.</p>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spotify API credentials must exit.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spotify API credentials must be valid.</p>
              </div>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reddit API credentials must exist.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/djtools/spotify/config.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 94</span>
<span class="normal"> 95</span>
<span class="normal"> 96</span>
<span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Constructor.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: Spotify API credentials must exit.</span>
<span class="sd">        RuntimeError: Spotify API credentials must be valid.</span>
<span class="sd">        RuntimeError: Reddit API credentials must exist.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="nb">super</span><span class="p">()</span><span class="o">.</span><span class="fm">__init__</span><span class="p">(</span><span class="o">*</span><span class="n">args</span><span class="p">,</span> <span class="o">**</span><span class="n">kwargs</span><span class="p">)</span>

    <span class="k">if</span> <span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">spotify_playlists</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">spotify_playlist_from_upload</span>
    <span class="p">)</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spotify_client_id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spotify_client_secret</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spotify_redirect_uri</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">spotify_username</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Without all the configuration options spotify_client_id, &quot;</span>
            <span class="s2">&quot;spotify_client_secret, spotify_redirect_uri, and &quot;</span>
            <span class="s2">&quot;spotify_username set to valid values, you cannot use &quot;</span>
            <span class="s2">&quot;spotify_playlists or spotify_playlist_from_upload&quot;</span>
        <span class="p">)</span>
    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spotify_playlists</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">spotify_playlist_from_upload</span><span class="p">:</span>
        <span class="c1"># pylint: disable=cyclic-import</span>
        <span class="kn">from</span><span class="w"> </span><span class="nn">djtools.spotify.helpers</span><span class="w"> </span><span class="kn">import</span> <span class="n">get_spotify_client</span>

        <span class="n">spotify</span> <span class="o">=</span> <span class="n">get_spotify_client</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">spotify</span><span class="o">.</span><span class="n">current_user</span><span class="p">()</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span><span class="s2">&quot;Spotify credentials are invalid!&quot;</span><span class="p">)</span> <span class="kn">from</span><span class="w"> </span><span class="nn">exc</span>

    <span class="k">if</span> <span class="bp">self</span><span class="o">.</span><span class="n">spotify_playlists</span> <span class="ow">and</span> <span class="ow">not</span> <span class="nb">all</span><span class="p">(</span>
        <span class="p">[</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reddit_client_id</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reddit_client_secret</span><span class="p">,</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">reddit_user_agent</span><span class="p">,</span>
        <span class="p">]</span>
    <span class="p">):</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Without all the configuration options reddit_client_id, &quot;</span>
            <span class="s2">&quot;reddit_client_secret, and reddit_user_agent, set to valid &quot;</span>
            <span class="s2">&quot;values, you cannot use spotify_playlists&quot;</span>
        <span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-class">



<h2 id="djtools.spotify.config.SubredditConfig" class="doc doc-heading">
            <code>SubredditConfig</code>


</h2>


    <div class="doc doc-contents ">
            <p class="doc doc-class-bases">
              Bases: <code><span title="pydantic.BaseModel">BaseModel</span></code></p>


        <p>Configuration object for spotify_playlists.</p>







              <details class="quote">
                <summary>Source code in <code>src/djtools/spotify/config.py</code></summary>
                <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">SubredditConfig</span><span class="p">(</span><span class="n">BaseModel</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Configuration object for spotify_playlists.&quot;&quot;&quot;</span>

    <span class="n">name</span><span class="p">:</span> <span class="nb">str</span>
    <span class="n">limit</span><span class="p">:</span> <span class="n">NonNegativeInt</span> <span class="o">=</span> <span class="mi">50</span>
    <span class="n">period</span><span class="p">:</span> <span class="n">SubredditPeriod</span> <span class="o">=</span> <span class="n">SubredditPeriod</span><span class="o">.</span><span class="n">WEEK</span>
    <span class="nb">type</span><span class="p">:</span> <span class="n">SubredditType</span> <span class="o">=</span> <span class="n">SubredditType</span><span class="o">.</span><span class="n">HOT</span>
</code></pre></div></td></tr></table></div>
              </details>



  <div class="doc doc-children">











  </div>

    </div>

</div>




  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="djtools.spotify.playlist_builder"></a>
    <div class="doc doc-contents first">

        <p>This module is responsible for creating or updating Spotify playlists. This
can be done in a couple of ways.</p>
<p>The first way is by using the posted output from
<code>djtools.sync.sync_operations.upload_music</code>. When another user uploads music to
the Beatcloud, you may want to generate a Spotify playlist from those tracks so
they may be previewed before you decide whether or not to download them.</p>
<p>The second way is by querying subreddit posts. Posts are first checked to see
if they are direct links to a Spotify track. If this is not the case, then the
post title is parsed in an attempt to interpret it as either
'ARTIST NAME - TRACK TITLE' or 'TRACK TITLE - ARTIST NAME'. These components
are then used to search the Spotify API for tracks. The resulting tracks have
their title and artist fields compared with the reddit post title and are added
to the respective playlist if the Levenshtein similarity passes a threshold.</p>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="djtools.spotify.playlist_builder.async_spotify_playlists" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">async_spotify_playlists</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>This function updates the contents of one or more Spotify playlists with
    the posts of one or more subreddits (currently only supports one
    subreddit per playlist).</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><span title="djtools.spotify.playlist_builder.BaseConfig">BaseConfig</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/djtools/spotify/playlist_builder.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span>
<span class="normal">76</span>
<span class="normal">77</span>
<span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span>
<span class="normal">95</span>
<span class="normal">96</span>
<span class="normal">97</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">async_spotify_playlists</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function updates the contents of one or more Spotify playlists with</span>
<span class="sd">        the posts of one or more subreddits (currently only supports one</span>
<span class="sd">        subreddit per playlist).</span>

<span class="sd">    Args:</span>
<span class="sd">        config: Configuration object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">spotify</span> <span class="o">=</span> <span class="n">get_spotify_client</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">reddit</span> <span class="o">=</span> <span class="n">get_reddit_client</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">playlist_ids</span> <span class="o">=</span> <span class="n">get_playlist_ids</span><span class="p">()</span>

    <span class="n">praw_cache</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">cache_file</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;.praw.cache&quot;</span>
    <span class="k">if</span> <span class="n">cache_file</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cache_file</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">_file</span><span class="p">:</span>
            <span class="n">praw_cache</span> <span class="o">=</span> <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">_file</span><span class="p">,</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span> <span class="ow">or</span> <span class="p">{}</span>

    <span class="n">tasks</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">asyncio</span><span class="o">.</span><span class="n">create_task</span><span class="p">(</span>
            <span class="n">get_subreddit_posts</span><span class="p">(</span>
                <span class="n">spotify</span><span class="p">,</span>
                <span class="n">reddit</span><span class="p">,</span>
                <span class="n">subreddit</span><span class="p">,</span>
                <span class="n">config</span><span class="p">,</span>
                <span class="n">praw_cache</span><span class="p">,</span>
            <span class="p">)</span>
        <span class="p">)</span>
        <span class="k">for</span> <span class="n">subreddit</span> <span class="ow">in</span> <span class="n">config</span><span class="o">.</span><span class="n">spotify</span><span class="o">.</span><span class="n">spotify_playlist_subreddits</span>
    <span class="p">]</span>

    <span class="k">for</span> <span class="n">task</span> <span class="ow">in</span> <span class="n">asyncio</span><span class="o">.</span><span class="n">as_completed</span><span class="p">(</span><span class="n">tasks</span><span class="p">):</span>
        <span class="n">tracks</span><span class="p">,</span> <span class="n">subreddit</span> <span class="o">=</span> <span class="k">await</span> <span class="n">task</span>
        <span class="n">playlist_ids</span> <span class="o">=</span> <span class="n">populate_playlist</span><span class="p">(</span>
            <span class="n">playlist_name</span><span class="o">=</span><span class="n">subreddit</span><span class="o">.</span><span class="n">name</span><span class="p">,</span>
            <span class="n">playlist_ids</span><span class="o">=</span><span class="n">playlist_ids</span><span class="p">,</span>
            <span class="n">spotify_username</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">spotify</span><span class="o">.</span><span class="n">spotify_username</span><span class="p">,</span>
            <span class="n">spotify</span><span class="o">=</span><span class="n">spotify</span><span class="p">,</span>
            <span class="n">tracks</span><span class="o">=</span><span class="n">tracks</span><span class="p">,</span>
            <span class="n">playlist_limit</span><span class="o">=</span><span class="n">subreddit</span><span class="o">.</span><span class="n">limit</span><span class="p">,</span>
            <span class="n">verbosity</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">verbosity</span><span class="p">,</span>
        <span class="p">)</span>

    <span class="k">await</span> <span class="n">reddit</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>

    <span class="n">write_playlist_ids</span><span class="p">(</span><span class="n">playlist_ids</span><span class="p">)</span>

    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">cache_file</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">_file</span><span class="p">:</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">praw_cache</span><span class="p">,</span> <span class="n">_file</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="djtools.spotify.playlist_builder.spotify_playlist_from_upload" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">spotify_playlist_from_upload</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Generates a Spotify playlist using a Discord webhook output.</p>
<p>If "upload_output", a path to a text file containing the pasted output of
the upload_music Discord webhook output, is provided, this is used to
generate a Spotify playlist of those uploaded tracks. If this is not
provided, then the clipboard contents are used instead.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><span title="djtools.spotify.playlist_builder.BaseConfig">BaseConfig</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


<p><span class="doc-section-title">Raises:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="RuntimeError">RuntimeError</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Output from an upload_music Discord webhook must be
copied to the system's clipboard</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/djtools/spotify/playlist_builder.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span>
<span class="normal">114</span>
<span class="normal">115</span>
<span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span>
<span class="normal">146</span>
<span class="normal">147</span>
<span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">spotify_playlist_from_upload</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Generates a Spotify playlist using a Discord webhook output.</span>

<span class="sd">    If &quot;upload_output&quot;, a path to a text file containing the pasted output of</span>
<span class="sd">    the upload_music Discord webhook output, is provided, this is used to</span>
<span class="sd">    generate a Spotify playlist of those uploaded tracks. If this is not</span>
<span class="sd">    provided, then the clipboard contents are used instead.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: Configuration object.</span>

<span class="sd">    Raises:</span>
<span class="sd">        RuntimeError: Output from an upload_music Discord webhook must be</span>
<span class="sd">            copied to the system&#39;s clipboard</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="c1"># Load upload output from the system&#39;s clipboard.</span>
    <span class="n">data</span> <span class="o">=</span> <span class="n">pyperclip</span><span class="o">.</span><span class="n">paste</span><span class="p">()</span>
    <span class="k">if</span> <span class="ow">not</span> <span class="n">data</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">RuntimeError</span><span class="p">(</span>
            <span class="s2">&quot;Generating a Spotify playlist from an upload requires output &quot;</span>
            <span class="s2">&quot;from an upload_music Discord webhook to be copied to the &quot;</span>
            <span class="s2">&quot;system&#39;s clipboard&quot;</span>
        <span class="p">)</span>

    <span class="n">spotify</span> <span class="o">=</span> <span class="n">get_spotify_client</span><span class="p">(</span><span class="n">config</span><span class="p">)</span>
    <span class="n">playlist_ids</span> <span class="o">=</span> <span class="n">get_playlist_ids</span><span class="p">()</span>

    <span class="c1"># Get (track title, artist name) tuples from file uploads.</span>
    <span class="n">user</span> <span class="o">=</span> <span class="s2">&quot;&quot;</span>
    <span class="n">files</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">line</span> <span class="ow">in</span> <span class="n">data</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">):</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">line</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot; &quot;</span><span class="p">):</span>
            <span class="k">if</span> <span class="ow">not</span> <span class="n">user</span><span class="p">:</span>
                <span class="n">user</span> <span class="o">=</span> <span class="n">line</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot;/&quot;</span><span class="p">)[</span><span class="mi">0</span><span class="p">]</span>
            <span class="k">continue</span>
        <span class="n">file_</span> <span class="o">=</span> <span class="n">Path</span><span class="p">(</span><span class="n">line</span><span class="p">)</span><span class="o">.</span><span class="n">stem</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">track</span><span class="p">,</span> <span class="n">artist</span> <span class="o">=</span> <span class="n">file_</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="o">.</span><span class="n">split</span><span class="p">(</span><span class="s2">&quot; - &quot;</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">ValueError</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">line</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span><span class="si">}</span><span class="s2"> is not a valid file&quot;</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="k">if</span> <span class="n">config</span><span class="o">.</span><span class="n">sync</span><span class="o">.</span><span class="n">artist_first</span><span class="p">:</span>
            <span class="n">track</span><span class="p">,</span> <span class="n">artist</span> <span class="o">=</span> <span class="n">artist</span><span class="p">,</span> <span class="n">track</span>
        <span class="n">files</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">track</span><span class="p">,</span> <span class="n">artist</span><span class="p">))</span>
    <span class="n">files</span> <span class="o">=</span> <span class="nb">list</span><span class="p">(</span><span class="nb">filter</span><span class="p">(</span><span class="k">lambda</span> <span class="n">x</span><span class="p">:</span> <span class="nb">len</span><span class="p">(</span><span class="n">x</span><span class="p">)</span> <span class="o">==</span> <span class="mi">2</span><span class="p">,</span> <span class="n">files</span><span class="p">))</span>

    <span class="c1"># Query Spotify for files in upload output.</span>
    <span class="n">threshold</span> <span class="o">=</span> <span class="n">config</span><span class="o">.</span><span class="n">spotify</span><span class="o">.</span><span class="n">spotify_playlist_fuzz_ratio</span>
    <span class="n">tracks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">title</span><span class="p">,</span> <span class="n">artist</span> <span class="ow">in</span> <span class="n">files</span><span class="p">:</span>
        <span class="n">query</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">&quot;track:</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2"> artist:</span><span class="si">{</span><span class="n">artist</span><span class="si">}</span><span class="s2">&quot;</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">results</span> <span class="o">=</span> <span class="n">spotify</span><span class="o">.</span><span class="n">search</span><span class="p">(</span><span class="n">q</span><span class="o">=</span><span class="n">query</span><span class="p">,</span> <span class="nb">type</span><span class="o">=</span><span class="s2">&quot;track&quot;</span><span class="p">,</span> <span class="n">limit</span><span class="o">=</span><span class="mi">50</span><span class="p">)</span>
        <span class="k">except</span> <span class="ne">Exception</span> <span class="k">as</span> <span class="n">exc</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;Error searching for &quot;</span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">artist</span><span class="si">}</span><span class="s1">&quot;: </span><span class="si">{</span><span class="n">exc</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">)</span>
            <span class="k">continue</span>

        <span class="n">match</span><span class="p">,</span> <span class="n">_</span> <span class="o">=</span> <span class="n">filter_results</span><span class="p">(</span><span class="n">spotify</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">artist</span><span class="p">)</span>
        <span class="k">if</span> <span class="n">match</span><span class="p">:</span>
            <span class="n">artists</span> <span class="o">=</span> <span class="s2">&quot;, &quot;</span><span class="o">.</span><span class="n">join</span><span class="p">([</span><span class="n">y</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span> <span class="k">for</span> <span class="n">y</span> <span class="ow">in</span> <span class="n">match</span><span class="p">[</span><span class="s2">&quot;artists&quot;</span><span class="p">]])</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
                <span class="sa">f</span><span class="s2">&quot;Matched </span><span class="si">{</span><span class="n">match</span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">]</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">artists</span><span class="si">}</span><span class="s2"> to </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">artist</span><span class="si">}</span><span class="s2">&quot;</span>
            <span class="p">)</span>
        <span class="k">else</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Could not find a match for </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2"> - </span><span class="si">{</span><span class="n">artist</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">continue</span>
        <span class="n">tracks</span><span class="o">.</span><span class="n">append</span><span class="p">((</span><span class="n">match</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">],</span> <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">match</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1"> - </span><span class="si">{</span><span class="n">artists</span><span class="si">}</span><span class="s1">&#39;</span><span class="p">))</span>

    <span class="n">playlist_ids</span> <span class="o">=</span> <span class="n">populate_playlist</span><span class="p">(</span>
        <span class="n">playlist_name</span><span class="o">=</span><span class="sa">f</span><span class="s2">&quot;</span><span class="si">{</span><span class="n">user</span><span class="si">}</span><span class="s2"> Uploads&quot;</span><span class="p">,</span>
        <span class="n">playlist_ids</span><span class="o">=</span><span class="n">playlist_ids</span><span class="p">,</span>
        <span class="n">spotify_username</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">spotify</span><span class="o">.</span><span class="n">spotify_username</span><span class="p">,</span>
        <span class="n">spotify</span><span class="o">=</span><span class="n">spotify</span><span class="p">,</span>
        <span class="n">tracks</span><span class="o">=</span><span class="n">tracks</span><span class="p">,</span>
        <span class="n">verbosity</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">verbosity</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="n">write_playlist_ids</span><span class="p">(</span><span class="n">playlist_ids</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="djtools.spotify.playlist_builder.spotify_playlists" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">spotify_playlists</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>This function asynchronously updates Spotify playlists.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><span title="djtools.spotify.playlist_builder.BaseConfig">BaseConfig</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/djtools/spotify/playlist_builder.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">spotify_playlists</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">BaseConfig</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;This function asynchronously updates Spotify playlists.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: Configuration object.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">asyncio</span><span class="o">.</span><span class="n">run</span><span class="p">(</span><span class="n">async_spotify_playlists</span><span class="p">(</span><span class="n">config</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>

<div class="doc doc-object doc-module">



<a id="djtools.spotify.helpers"></a>
    <div class="doc doc-contents first">

        <p>This module contains helper functions used by the "spotify" module.</p>









  <div class="doc doc-children">









<div class="doc doc-object doc-function">


<h2 id="djtools.spotify.helpers.filter_results" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">filter_results</span><span class="p">(</span><span class="n">spotify</span><span class="p">,</span> <span class="n">results</span><span class="p">,</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">artist</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Helper function for applying filtering logic to find tracks that
    match the submission title closely enough.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>spotify</code>
            </td>
            <td>
                  <code><span title="spotipy.Spotify">Spotify</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spotify client.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>results</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Dict">Dict</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spotify search results.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>threshold</code>
            </td>
            <td>
                  <code><span title="float">float</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Minimum Levenshtein distance.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>title</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Potential title of a track.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>artist</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Potential artist of a track.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Any">Any</span>], <span title="float">float</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Tuple of track object and Levenshtein distance.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/djtools/spotify/helpers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">36</span>
<span class="normal">37</span>
<span class="normal">38</span>
<span class="normal">39</span>
<span class="normal">40</span>
<span class="normal">41</span>
<span class="normal">42</span>
<span class="normal">43</span>
<span class="normal">44</span>
<span class="normal">45</span>
<span class="normal">46</span>
<span class="normal">47</span>
<span class="normal">48</span>
<span class="normal">49</span>
<span class="normal">50</span>
<span class="normal">51</span>
<span class="normal">52</span>
<span class="normal">53</span>
<span class="normal">54</span>
<span class="normal">55</span>
<span class="normal">56</span>
<span class="normal">57</span>
<span class="normal">58</span>
<span class="normal">59</span>
<span class="normal">60</span>
<span class="normal">61</span>
<span class="normal">62</span>
<span class="normal">63</span>
<span class="normal">64</span>
<span class="normal">65</span>
<span class="normal">66</span>
<span class="normal">67</span>
<span class="normal">68</span>
<span class="normal">69</span>
<span class="normal">70</span>
<span class="normal">71</span>
<span class="normal">72</span>
<span class="normal">73</span>
<span class="normal">74</span>
<span class="normal">75</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">filter_results</span><span class="p">(</span>
    <span class="n">spotify</span><span class="p">:</span> <span class="n">spotipy</span><span class="o">.</span><span class="n">Spotify</span><span class="p">,</span>
    <span class="n">results</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Dict</span><span class="p">],</span>
    <span class="n">threshold</span><span class="p">:</span> <span class="nb">float</span><span class="p">,</span>
    <span class="n">title</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">artist</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Any</span><span class="p">],</span> <span class="nb">float</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Helper function for applying filtering logic to find tracks that</span>
<span class="sd">        match the submission title closely enough.</span>

<span class="sd">    Args:</span>
<span class="sd">        spotify: Spotify client.</span>
<span class="sd">        results: Spotify search results.</span>
<span class="sd">        threshold: Minimum Levenshtein distance.</span>
<span class="sd">        title: Potential title of a track.</span>
<span class="sd">        artist: Potential artist of a track.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Tuple of track object and Levenshtein distance.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">track</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="p">{},</span> <span class="mf">0.0</span>
    <span class="n">tracks</span> <span class="o">=</span> <span class="n">_filter_tracks</span><span class="p">(</span>
        <span class="n">results</span><span class="p">[</span><span class="s2">&quot;tracks&quot;</span><span class="p">][</span><span class="s2">&quot;items&quot;</span><span class="p">],</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">artist</span>
    <span class="p">)</span>
    <span class="k">while</span> <span class="n">results</span><span class="p">[</span><span class="s2">&quot;tracks&quot;</span><span class="p">][</span><span class="s2">&quot;next&quot;</span><span class="p">]:</span>
        <span class="k">try</span><span class="p">:</span>
            <span class="n">results</span> <span class="o">=</span> <span class="n">spotify</span><span class="o">.</span><span class="n">next</span><span class="p">(</span><span class="n">results</span><span class="p">[</span><span class="s2">&quot;tracks&quot;</span><span class="p">])</span>
        <span class="k">except</span> <span class="ne">Exception</span><span class="p">:</span>
            <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;Failed to get next tracks for </span><span class="si">{</span><span class="n">title</span><span class="p">,</span><span class="w"> </span><span class="n">artist</span><span class="si">}</span><span class="s2">&quot;</span><span class="p">)</span>
            <span class="k">break</span>
        <span class="n">tracks</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span>
            <span class="n">_filter_tracks</span><span class="p">(</span>
                <span class="n">results</span><span class="p">[</span><span class="s2">&quot;tracks&quot;</span><span class="p">][</span><span class="s2">&quot;items&quot;</span><span class="p">],</span> <span class="n">threshold</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">artist</span>
            <span class="p">)</span>
        <span class="p">)</span>

    <span class="k">if</span> <span class="n">tracks</span><span class="p">:</span>
        <span class="n">track</span><span class="p">,</span> <span class="n">dist</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">tracks</span><span class="p">,</span> <span class="n">key</span><span class="o">=</span><span class="n">itemgetter</span><span class="p">(</span><span class="mi">1</span><span class="p">))</span>

    <span class="k">return</span> <span class="n">track</span><span class="p">,</span> <span class="n">dist</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="djtools.spotify.helpers.get_playlist_ids" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_playlist_ids</span><span class="p">()</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Load Spotify playlist names -&gt; IDs lookup.</p>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of Spotify playlist names mapped to playlist IDs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/djtools/spotify/helpers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">78</span>
<span class="normal">79</span>
<span class="normal">80</span>
<span class="normal">81</span>
<span class="normal">82</span>
<span class="normal">83</span>
<span class="normal">84</span>
<span class="normal">85</span>
<span class="normal">86</span>
<span class="normal">87</span>
<span class="normal">88</span>
<span class="normal">89</span>
<span class="normal">90</span>
<span class="normal">91</span>
<span class="normal">92</span>
<span class="normal">93</span>
<span class="normal">94</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_playlist_ids</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Load Spotify playlist names -&gt; IDs lookup.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Dictionary of Spotify playlist names mapped to playlist IDs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">playlist_ids</span> <span class="o">=</span> <span class="p">{}</span>
    <span class="n">ids_path</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;configs&quot;</span> <span class="o">/</span> <span class="s2">&quot;spotify_playlists.yaml&quot;</span>
    <span class="p">)</span>
    <span class="k">if</span> <span class="n">ids_path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
        <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">ids_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;r&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">_file</span><span class="p">:</span>
            <span class="n">playlist_ids</span> <span class="o">=</span> <span class="p">(</span>
                <span class="n">yaml</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">_file</span><span class="p">,</span> <span class="n">Loader</span><span class="o">=</span><span class="n">yaml</span><span class="o">.</span><span class="n">FullLoader</span><span class="p">)</span> <span class="ow">or</span> <span class="n">playlist_ids</span>
            <span class="p">)</span>

    <span class="k">return</span> <span class="n">playlist_ids</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="djtools.spotify.helpers.get_reddit_client" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_reddit_client</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Instantiate a Reddit API client.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><span title="djtools.spotify.helpers.BaseConfig">BaseConfig</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="asyncpraw.Reddit">Reddit</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reddit API client.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/djtools/spotify/helpers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"> 97</span>
<span class="normal"> 98</span>
<span class="normal"> 99</span>
<span class="normal">100</span>
<span class="normal">101</span>
<span class="normal">102</span>
<span class="normal">103</span>
<span class="normal">104</span>
<span class="normal">105</span>
<span class="normal">106</span>
<span class="normal">107</span>
<span class="normal">108</span>
<span class="normal">109</span>
<span class="normal">110</span>
<span class="normal">111</span>
<span class="normal">112</span>
<span class="normal">113</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_reddit_client</span><span class="p">(</span><span class="n">config</span><span class="p">:</span> <span class="n">BaseConfig</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">praw</span><span class="o">.</span><span class="n">Reddit</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Instantiate a Reddit API client.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: Configuration object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Reddit API client.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">reddit</span> <span class="o">=</span> <span class="n">praw</span><span class="o">.</span><span class="n">Reddit</span><span class="p">(</span>
        <span class="n">client_id</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">spotify</span><span class="o">.</span><span class="n">reddit_client_id</span><span class="p">,</span>
        <span class="n">client_secret</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">spotify</span><span class="o">.</span><span class="n">reddit_client_secret</span><span class="p">,</span>
        <span class="n">user_agent</span><span class="o">=</span><span class="n">config</span><span class="o">.</span><span class="n">spotify</span><span class="o">.</span><span class="n">reddit_user_agent</span><span class="p">,</span>
        <span class="n">timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">reddit</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="djtools.spotify.helpers.get_spotify_client" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_spotify_client</span><span class="p">(</span><span class="n">config</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Instantiate a Spotify API client.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><span title="typing.Union">Union</span>[<span title="djtools.spotify.helpers.BaseConfig">BaseConfig</span>, <span title="djtools.spotify.helpers.SpotifyConfig">SpotifyConfig</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="spotipy.Spotify">Spotify</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spotify API client.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/djtools/spotify/helpers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">116</span>
<span class="normal">117</span>
<span class="normal">118</span>
<span class="normal">119</span>
<span class="normal">120</span>
<span class="normal">121</span>
<span class="normal">122</span>
<span class="normal">123</span>
<span class="normal">124</span>
<span class="normal">125</span>
<span class="normal">126</span>
<span class="normal">127</span>
<span class="normal">128</span>
<span class="normal">129</span>
<span class="normal">130</span>
<span class="normal">131</span>
<span class="normal">132</span>
<span class="normal">133</span>
<span class="normal">134</span>
<span class="normal">135</span>
<span class="normal">136</span>
<span class="normal">137</span>
<span class="normal">138</span>
<span class="normal">139</span>
<span class="normal">140</span>
<span class="normal">141</span>
<span class="normal">142</span>
<span class="normal">143</span>
<span class="normal">144</span>
<span class="normal">145</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">get_spotify_client</span><span class="p">(</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n">BaseConfig</span><span class="p">,</span> <span class="n">SpotifyConfig</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">spotipy</span><span class="o">.</span><span class="n">Spotify</span><span class="p">:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Instantiate a Spotify API client.</span>

<span class="sd">    Args:</span>
<span class="sd">        config: Configuration object.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Spotify API client.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="n">spotify_config</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="s2">&quot;spotify&quot;</span><span class="p">)</span>
    <span class="k">except</span> <span class="ne">AttributeError</span><span class="p">:</span>
        <span class="n">spotify_config</span> <span class="o">=</span> <span class="n">config</span>

    <span class="n">spotify</span> <span class="o">=</span> <span class="n">spotipy</span><span class="o">.</span><span class="n">Spotify</span><span class="p">(</span>
        <span class="n">auth_manager</span><span class="o">=</span><span class="n">SpotifyOAuth</span><span class="p">(</span>
            <span class="n">client_id</span><span class="o">=</span><span class="n">spotify_config</span><span class="o">.</span><span class="n">spotify_client_id</span><span class="p">,</span>
            <span class="n">client_secret</span><span class="o">=</span><span class="n">spotify_config</span><span class="o">.</span><span class="n">spotify_client_secret</span><span class="p">,</span>
            <span class="n">redirect_uri</span><span class="o">=</span><span class="n">spotify_config</span><span class="o">.</span><span class="n">spotify_redirect_uri</span><span class="p">,</span>
            <span class="n">scope</span><span class="o">=</span><span class="s2">&quot;playlist-modify-public&quot;</span><span class="p">,</span>
            <span class="n">requests_timeout</span><span class="o">=</span><span class="mi">30</span><span class="p">,</span>
            <span class="n">cache_handler</span><span class="o">=</span><span class="n">spotipy</span><span class="o">.</span><span class="n">CacheFileHandler</span><span class="p">(</span>
                <span class="n">cache_path</span><span class="o">=</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;.spotify.cache&quot;</span>
            <span class="p">),</span>
        <span class="p">)</span>
    <span class="p">)</span>

    <span class="k">return</span> <span class="n">spotify</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="djtools.spotify.helpers.get_subreddit_posts" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">get_subreddit_posts</span><span class="p">(</span><span class="n">spotify</span><span class="p">,</span> <span class="n">reddit</span><span class="p">,</span> <span class="n">subreddit</span><span class="p">,</span> <span class="n">config</span><span class="p">,</span> <span class="n">praw_cache</span><span class="p">)</span></code>

  <span class="doc doc-labels">
      <small class="doc doc-label doc-label-async"><code>async</code></small>
  </span>

</h2>


    <div class="doc doc-contents ">

        <p>Filters the submissions for the provided subreddit and tries to resolve
    each into a Spotify track until all the submissions are parsed or the
    track limit has been met.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>spotify</code>
            </td>
            <td>
                  <code><span title="spotipy.Spotify">Spotify</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spotify client.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>reddit</code>
            </td>
            <td>
                  <code><span title="asyncpraw.Reddit">Reddit</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Reddit client.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>subreddit</code>
            </td>
            <td>
                  <code><span title="djtools.spotify.helpers.SubredditConfig">SubredditConfig</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>SubredditConfig object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>config</code>
            </td>
            <td>
                  <code><span title="djtools.spotify.helpers.BaseConfig">BaseConfig</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Configuration object.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>praw_cache</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="bool">bool</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Cached praw submissions.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Tuple">Tuple</span>[<span title="typing.List">List</span>[<span title="typing.Tuple">Tuple</span>[<span title="str">str</span>]], <span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="typing.Union">Union</span>[<span title="str">str</span>, <span title="int">int</span>]]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of Spotify track ("id", "name") tuples and SubredditConfig as a
dictionary.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/djtools/spotify/helpers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">148</span>
<span class="normal">149</span>
<span class="normal">150</span>
<span class="normal">151</span>
<span class="normal">152</span>
<span class="normal">153</span>
<span class="normal">154</span>
<span class="normal">155</span>
<span class="normal">156</span>
<span class="normal">157</span>
<span class="normal">158</span>
<span class="normal">159</span>
<span class="normal">160</span>
<span class="normal">161</span>
<span class="normal">162</span>
<span class="normal">163</span>
<span class="normal">164</span>
<span class="normal">165</span>
<span class="normal">166</span>
<span class="normal">167</span>
<span class="normal">168</span>
<span class="normal">169</span>
<span class="normal">170</span>
<span class="normal">171</span>
<span class="normal">172</span>
<span class="normal">173</span>
<span class="normal">174</span>
<span class="normal">175</span>
<span class="normal">176</span>
<span class="normal">177</span>
<span class="normal">178</span>
<span class="normal">179</span>
<span class="normal">180</span>
<span class="normal">181</span>
<span class="normal">182</span>
<span class="normal">183</span>
<span class="normal">184</span>
<span class="normal">185</span>
<span class="normal">186</span>
<span class="normal">187</span>
<span class="normal">188</span>
<span class="normal">189</span>
<span class="normal">190</span>
<span class="normal">191</span>
<span class="normal">192</span>
<span class="normal">193</span>
<span class="normal">194</span>
<span class="normal">195</span>
<span class="normal">196</span>
<span class="normal">197</span>
<span class="normal">198</span>
<span class="normal">199</span>
<span class="normal">200</span>
<span class="normal">201</span>
<span class="normal">202</span>
<span class="normal">203</span>
<span class="normal">204</span>
<span class="normal">205</span>
<span class="normal">206</span>
<span class="normal">207</span>
<span class="normal">208</span>
<span class="normal">209</span>
<span class="normal">210</span>
<span class="normal">211</span>
<span class="normal">212</span>
<span class="normal">213</span>
<span class="normal">214</span>
<span class="normal">215</span>
<span class="normal">216</span>
<span class="normal">217</span>
<span class="normal">218</span>
<span class="normal">219</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">async</span> <span class="k">def</span><span class="w"> </span><span class="nf">get_subreddit_posts</span><span class="p">(</span>
    <span class="n">spotify</span><span class="p">:</span> <span class="n">spotipy</span><span class="o">.</span><span class="n">Spotify</span><span class="p">,</span>
    <span class="n">reddit</span><span class="p">:</span> <span class="n">praw</span><span class="o">.</span><span class="n">Reddit</span><span class="p">,</span>
    <span class="n">subreddit</span><span class="p">:</span> <span class="n">SubredditConfig</span><span class="p">,</span>
    <span class="n">config</span><span class="p">:</span> <span class="n">BaseConfig</span><span class="p">,</span>
    <span class="n">praw_cache</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">bool</span><span class="p">],</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Tuple</span><span class="p">[</span><span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="n">Union</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">int</span><span class="p">]]]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Filters the submissions for the provided subreddit and tries to resolve</span>
<span class="sd">        each into a Spotify track until all the submissions are parsed or the</span>
<span class="sd">        track limit has been met.</span>

<span class="sd">    Args:</span>
<span class="sd">        spotify: Spotify client.</span>
<span class="sd">        reddit: Reddit client.</span>
<span class="sd">        subreddit: SubredditConfig object.</span>
<span class="sd">        config: Configuration object.</span>
<span class="sd">        praw_cache: Cached praw submissions.</span>

<span class="sd">    Returns:</span>
<span class="sd">        List of Spotify track (&quot;id&quot;, &quot;name&quot;) tuples and SubredditConfig as a</span>
<span class="sd">            dictionary.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">sub</span> <span class="o">=</span> <span class="k">await</span> <span class="n">reddit</span><span class="o">.</span><span class="n">subreddit</span><span class="p">(</span><span class="n">subreddit</span><span class="o">.</span><span class="n">name</span><span class="p">)</span>
    <span class="n">func</span> <span class="o">=</span> <span class="nb">getattr</span><span class="p">(</span><span class="n">sub</span><span class="p">,</span> <span class="n">subreddit</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span><span class="p">)</span>
    <span class="n">kwargs</span> <span class="o">=</span> <span class="p">{</span><span class="s2">&quot;limit&quot;</span><span class="p">:</span> <span class="n">config</span><span class="o">.</span><span class="n">spotify</span><span class="o">.</span><span class="n">spotify_playlist_post_limit</span><span class="p">}</span>
    <span class="k">if</span> <span class="n">subreddit</span><span class="o">.</span><span class="n">type</span> <span class="o">==</span> <span class="n">SubredditType</span><span class="o">.</span><span class="n">TOP</span><span class="p">:</span>
        <span class="n">kwargs</span><span class="p">[</span><span class="s2">&quot;time_filter&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">subreddit</span><span class="o">.</span><span class="n">period</span>
    <span class="n">subs</span> <span class="o">=</span> <span class="p">[</span>
        <span class="n">x</span>
        <span class="k">async</span> <span class="k">for</span> <span class="n">x</span> <span class="ow">in</span> <span class="n">_catch</span><span class="p">(</span>
            <span class="n">func</span><span class="p">(</span><span class="o">**</span><span class="n">kwargs</span><span class="p">),</span> <span class="n">message</span><span class="o">=</span><span class="s2">&quot;Failed to retrieve Reddit submission&quot;</span>
        <span class="p">)</span>
    <span class="p">]</span>
    <span class="n">msg</span> <span class="o">=</span> <span class="sa">f</span><span class="s1">&#39;Filtering </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">subs</span><span class="p">)</span><span class="si">}</span><span class="s1"> &quot;r/</span><span class="si">{</span><span class="n">subreddit</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot; </span><span class="si">{</span><span class="n">subreddit</span><span class="o">.</span><span class="n">type</span><span class="o">.</span><span class="n">value</span><span class="si">}</span><span class="s1"> posts&#39;</span>
    <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
    <span class="n">submissions</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">for</span> <span class="n">submission</span> <span class="ow">in</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">subs</span><span class="p">,</span> <span class="n">desc</span><span class="o">=</span><span class="n">msg</span><span class="p">):</span>
        <span class="k">if</span> <span class="n">submission</span><span class="o">.</span><span class="n">id</span> <span class="ow">in</span> <span class="n">praw_cache</span><span class="p">:</span>
            <span class="k">continue</span>
        <span class="n">submissions</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">submission</span><span class="p">)</span>
        <span class="n">praw_cache</span><span class="p">[</span><span class="n">submission</span><span class="o">.</span><span class="n">id</span><span class="p">]</span> <span class="o">=</span> <span class="kc">True</span>
    <span class="n">new_tracks</span> <span class="o">=</span> <span class="p">[]</span>
    <span class="k">if</span> <span class="n">submissions</span><span class="p">:</span>
        <span class="n">msg</span> <span class="o">=</span> <span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Searching Spotify for </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">submissions</span><span class="p">)</span><span class="si">}</span><span class="s2"> new submission(s) from &quot;</span>
            <span class="sa">f</span><span class="s1">&#39;&quot;r/</span><span class="si">{</span><span class="n">subreddit</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot;&#39;</span>
        <span class="p">)</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="n">msg</span><span class="p">)</span>
        <span class="n">payload</span> <span class="o">=</span> <span class="nb">zip</span><span class="p">(</span>
            <span class="n">submissions</span><span class="p">,</span>
            <span class="p">[</span><span class="n">spotify</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">submissions</span><span class="p">),</span>
            <span class="p">[</span><span class="n">config</span><span class="o">.</span><span class="n">spotify</span><span class="o">.</span><span class="n">spotify_playlist_fuzz_ratio</span><span class="p">]</span> <span class="o">*</span> <span class="nb">len</span><span class="p">(</span><span class="n">submissions</span><span class="p">),</span>
        <span class="p">)</span>

        <span class="k">with</span> <span class="n">ThreadPoolExecutor</span><span class="p">(</span><span class="n">max_workers</span><span class="o">=</span><span class="mi">8</span><span class="p">)</span> <span class="k">as</span> <span class="n">executor</span><span class="p">:</span>
            <span class="n">futures</span> <span class="o">=</span> <span class="p">[</span><span class="n">executor</span><span class="o">.</span><span class="n">submit</span><span class="p">(</span><span class="n">_process</span><span class="p">,</span> <span class="o">*</span><span class="n">args</span><span class="p">)</span> <span class="k">for</span> <span class="n">args</span> <span class="ow">in</span> <span class="n">payload</span><span class="p">]</span>

            <span class="k">with</span> <span class="n">tqdm</span><span class="p">(</span><span class="n">total</span><span class="o">=</span><span class="nb">len</span><span class="p">(</span><span class="n">futures</span><span class="p">),</span> <span class="n">desc</span><span class="o">=</span><span class="n">msg</span><span class="p">)</span> <span class="k">as</span> <span class="n">pbar</span><span class="p">:</span>
                <span class="n">new_tracks</span> <span class="o">=</span> <span class="p">[]</span>
                <span class="k">for</span> <span class="n">future</span> <span class="ow">in</span> <span class="n">as_completed</span><span class="p">(</span><span class="n">futures</span><span class="p">):</span>
                    <span class="n">new_tracks</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">future</span><span class="o">.</span><span class="n">result</span><span class="p">())</span>
                    <span class="n">pbar</span><span class="o">.</span><span class="n">update</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span>

        <span class="n">new_tracks</span> <span class="o">=</span> <span class="p">[</span><span class="n">track</span> <span class="k">for</span> <span class="n">track</span> <span class="ow">in</span> <span class="n">new_tracks</span> <span class="k">if</span> <span class="n">track</span><span class="p">]</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Got </span><span class="si">{</span><span class="nb">len</span><span class="p">(</span><span class="n">new_tracks</span><span class="p">)</span><span class="si">}</span><span class="s2"> Spotify track(s) from new &quot;</span>
            <span class="sa">f</span><span class="s1">&#39;&quot;r/</span><span class="si">{</span><span class="n">subreddit</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot; posts&#39;</span>
        <span class="p">)</span>
    <span class="k">else</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span><span class="sa">f</span><span class="s1">&#39;No new submissions from &quot;r/</span><span class="si">{</span><span class="n">subreddit</span><span class="o">.</span><span class="n">name</span><span class="si">}</span><span class="s1">&quot;&#39;</span><span class="p">)</span>

    <span class="k">return</span> <span class="n">new_tracks</span><span class="p">,</span> <span class="n">subreddit</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="djtools.spotify.helpers.populate_playlist" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">populate_playlist</span><span class="p">(</span><span class="n">playlist_name</span><span class="p">,</span> <span class="n">playlist_ids</span><span class="p">,</span> <span class="n">spotify_username</span><span class="p">,</span> <span class="n">spotify</span><span class="p">,</span> <span class="n">tracks</span><span class="p">,</span> <span class="n">playlist_limit</span><span class="o">=</span><span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="p">,</span> <span class="n">verbosity</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Inserts tracks into either a new playlist or an existing one.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>playlist_name</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Name of the playlist.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>playlist_ids</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Lookup of playlist IDs.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>spotify_username</code>
            </td>
            <td>
                  <code><span title="str">str</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spotify user's username.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>spotify</code>
            </td>
            <td>
                  <code><span title="spotipy.Spotify">Spotify</span></code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Spotify client.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>tracks</code>
            </td>
            <td>
                  <code><span title="typing.List">List</span>[<span title="typing.Tuple">Tuple</span>[<span title="str">str</span>]]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>List of tracks.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>playlist_limit</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Maximum number of tracks allowed in a playlist.</p>
              </div>
            </td>
            <td>
                  <code><span title="sys.maxsize">maxsize</span></code>
            </td>
          </tr>
          <tr class="doc-section-item">
            <td>
                <code>verbosity</code>
            </td>
            <td>
                  <code><span title="typing.Optional">Optional</span>[<span title="int">int</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Logging verbosity level.</p>
              </div>
            </td>
            <td>
                  <code>0</code>
            </td>
          </tr>
      </tbody>
    </table>


    <p><span class="doc-section-title">Returns:</span></p>
    <table>
      <thead>
        <tr>
          <th>Type</th>
          <th>Description</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Updated playlist IDs.</p>
              </div>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/djtools/spotify/helpers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">222</span>
<span class="normal">223</span>
<span class="normal">224</span>
<span class="normal">225</span>
<span class="normal">226</span>
<span class="normal">227</span>
<span class="normal">228</span>
<span class="normal">229</span>
<span class="normal">230</span>
<span class="normal">231</span>
<span class="normal">232</span>
<span class="normal">233</span>
<span class="normal">234</span>
<span class="normal">235</span>
<span class="normal">236</span>
<span class="normal">237</span>
<span class="normal">238</span>
<span class="normal">239</span>
<span class="normal">240</span>
<span class="normal">241</span>
<span class="normal">242</span>
<span class="normal">243</span>
<span class="normal">244</span>
<span class="normal">245</span>
<span class="normal">246</span>
<span class="normal">247</span>
<span class="normal">248</span>
<span class="normal">249</span>
<span class="normal">250</span>
<span class="normal">251</span>
<span class="normal">252</span>
<span class="normal">253</span>
<span class="normal">254</span>
<span class="normal">255</span>
<span class="normal">256</span>
<span class="normal">257</span>
<span class="normal">258</span>
<span class="normal">259</span>
<span class="normal">260</span>
<span class="normal">261</span>
<span class="normal">262</span>
<span class="normal">263</span>
<span class="normal">264</span>
<span class="normal">265</span>
<span class="normal">266</span>
<span class="normal">267</span>
<span class="normal">268</span>
<span class="normal">269</span>
<span class="normal">270</span>
<span class="normal">271</span>
<span class="normal">272</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">populate_playlist</span><span class="p">(</span>
    <span class="n">playlist_name</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">playlist_ids</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">],</span>
    <span class="n">spotify_username</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span>
    <span class="n">spotify</span><span class="p">:</span> <span class="n">spotipy</span><span class="o">.</span><span class="n">Spotify</span><span class="p">,</span>
    <span class="n">tracks</span><span class="p">:</span> <span class="n">List</span><span class="p">[</span><span class="n">Tuple</span><span class="p">[</span><span class="nb">str</span><span class="p">]],</span>
    <span class="n">playlist_limit</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">maxsize</span><span class="p">,</span>
    <span class="n">verbosity</span><span class="p">:</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span>
<span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]:</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Inserts tracks into either a new playlist or an existing one.</span>

<span class="sd">    Args:</span>
<span class="sd">        playlist_name: Name of the playlist.</span>
<span class="sd">        playlist_ids: Lookup of playlist IDs.</span>
<span class="sd">        spotify_username: Spotify user&#39;s username.</span>
<span class="sd">        spotify: Spotify client.</span>
<span class="sd">        tracks: List of tracks.</span>
<span class="sd">        playlist_limit: Maximum number of tracks allowed in a playlist.</span>
<span class="sd">        verbosity: Logging verbosity level.</span>

<span class="sd">    Returns:</span>
<span class="sd">        Updated playlist IDs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">playlist_id</span> <span class="o">=</span> <span class="n">playlist_ids</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="n">playlist_name</span><span class="p">)</span>
    <span class="n">playlist</span> <span class="o">=</span> <span class="kc">None</span>
    <span class="k">if</span> <span class="n">playlist_id</span> <span class="ow">and</span> <span class="n">tracks</span><span class="p">:</span>
        <span class="n">playlist</span> <span class="o">=</span> <span class="n">_update_existing_playlist</span><span class="p">(</span>
            <span class="n">spotify</span><span class="p">,</span>
            <span class="n">playlist_id</span><span class="p">,</span>
            <span class="n">tracks</span><span class="p">,</span>
            <span class="n">playlist_limit</span><span class="p">,</span>
            <span class="n">verbosity</span><span class="p">,</span>
        <span class="p">)</span>
    <span class="k">elif</span> <span class="n">tracks</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span>
            <span class="sa">f</span><span class="s2">&quot;Unable to get ID for </span><span class="si">{</span><span class="n">playlist_name</span><span class="si">}</span><span class="s2">...creating a new &quot;</span>
            <span class="s2">&quot;playlist&quot;</span>
        <span class="p">)</span>
        <span class="n">playlist</span> <span class="o">=</span> <span class="n">_build_new_playlist</span><span class="p">(</span>
            <span class="n">spotify</span><span class="p">,</span> <span class="n">spotify_username</span><span class="p">,</span> <span class="n">playlist_name</span><span class="p">,</span> <span class="n">tracks</span>
        <span class="p">)</span>
        <span class="n">playlist_ids</span><span class="p">[</span><span class="n">playlist_name</span><span class="p">]</span> <span class="o">=</span> <span class="n">playlist</span><span class="p">[</span><span class="s2">&quot;id&quot;</span><span class="p">]</span>
    <span class="k">elif</span> <span class="n">playlist_id</span><span class="p">:</span>
        <span class="n">playlist</span> <span class="o">=</span> <span class="n">spotify</span><span class="o">.</span><span class="n">playlist</span><span class="p">(</span><span class="n">playlist_id</span><span class="p">)</span>
    <span class="k">if</span> <span class="n">playlist</span><span class="p">:</span>
        <span class="n">logger</span><span class="o">.</span><span class="n">info</span><span class="p">(</span>
            <span class="sa">f</span><span class="s1">&#39;&quot;</span><span class="si">{</span><span class="n">playlist</span><span class="p">[</span><span class="s2">&quot;name&quot;</span><span class="p">]</span><span class="si">}</span><span class="s1">&quot;: &#39;</span>
            <span class="sa">f</span><span class="s1">&#39;</span><span class="si">{</span><span class="n">playlist</span><span class="p">[</span><span class="s2">&quot;external_urls&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;spotify&quot;</span><span class="p">)</span><span class="si">}</span><span class="s1">&#39;</span>
        <span class="p">)</span>

    <span class="k">return</span> <span class="n">playlist_ids</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>

<div class="doc doc-object doc-function">


<h2 id="djtools.spotify.helpers.write_playlist_ids" class="doc doc-heading">
            <code class="highlight language-python"><span class="n">write_playlist_ids</span><span class="p">(</span><span class="n">playlist_ids</span><span class="p">)</span></code>

</h2>


    <div class="doc doc-contents ">

        <p>Write playlist IDs to file.</p>


<p><span class="doc-section-title">Parameters:</span></p>
    <table>
      <thead>
        <tr>
          <th>Name</th>
          <th>Type</th>
          <th>Description</th>
          <th>Default</th>
        </tr>
      </thead>
      <tbody>
          <tr class="doc-section-item">
            <td>
                <code>playlist_ids</code>
            </td>
            <td>
                  <code><span title="typing.Dict">Dict</span>[<span title="str">str</span>, <span title="str">str</span>]</code>
            </td>
            <td>
              <div class="doc-md-description">
                <p>Dictionary of Spotify playlist names mapped to playlist
IDs.</p>
              </div>
            </td>
            <td>
                <em>required</em>
            </td>
          </tr>
      </tbody>
    </table>


            <details class="quote">
              <summary>Source code in <code>src/djtools/spotify/helpers.py</code></summary>
              <div class="highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal">275</span>
<span class="normal">276</span>
<span class="normal">277</span>
<span class="normal">278</span>
<span class="normal">279</span>
<span class="normal">280</span>
<span class="normal">281</span>
<span class="normal">282</span>
<span class="normal">283</span>
<span class="normal">284</span>
<span class="normal">285</span>
<span class="normal">286</span></pre></div></td><td class="code"><div><pre><span></span><code><span class="k">def</span><span class="w"> </span><span class="nf">write_playlist_ids</span><span class="p">(</span><span class="n">playlist_ids</span><span class="p">:</span> <span class="n">Dict</span><span class="p">[</span><span class="nb">str</span><span class="p">,</span> <span class="nb">str</span><span class="p">]):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Write playlist IDs to file.</span>

<span class="sd">    Args:</span>
<span class="sd">        playlist_ids: Dictionary of Spotify playlist names mapped to playlist</span>
<span class="sd">            IDs.</span>
<span class="sd">    &quot;&quot;&quot;</span>
    <span class="n">ids_path</span> <span class="o">=</span> <span class="p">(</span>
        <span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span><span class="o">.</span><span class="n">parent</span> <span class="o">/</span> <span class="s2">&quot;configs&quot;</span> <span class="o">/</span> <span class="s2">&quot;spotify_playlists.yaml&quot;</span>
    <span class="p">)</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">ids_path</span><span class="p">,</span> <span class="n">mode</span><span class="o">=</span><span class="s2">&quot;w&quot;</span><span class="p">,</span> <span class="n">encoding</span><span class="o">=</span><span class="s2">&quot;utf-8&quot;</span><span class="p">)</span> <span class="k">as</span> <span class="n">_file</span><span class="p">:</span>
        <span class="n">yaml</span><span class="o">.</span><span class="n">dump</span><span class="p">(</span><span class="n">playlist_ids</span><span class="p">,</span> <span class="n">_file</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
            </details>
    </div>

</div>



  </div>

    </div>

</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "../..", "features": [], "search": "../../assets/javascripts/workers/search.d50fe291.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.50899def.min.js"></script>
      
    
  </body>
</html>